{"version":3,"file":"js/720.51c57433.js","mappings":"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","sources":["webpack://frontend-clean/./src/components/DoctorDashboard.vue","webpack://frontend-clean/./src/components/DoctorDashboard.vue?6c3a"],"sourcesContent":["<template>\r\n  <div class=\"dashboard-container\">\r\n    <div class=\"header\">\r\n      <h1>Doctor Dashboard</h1>\r\n      <button @click=\"logout\" class=\"logout-btn\">Logout</button>\r\n    </div>\r\n\r\n    <div v-if=\"loading\" class=\"loading\">Loading dashboard data...</div>\r\n    <div v-else-if=\"error\" class=\"error-message\">{{ error }}</div>\r\n\r\n    <div v-else>\r\n      <!-- Stats Section -->\r\n      <div class=\"dashboard-stats\">\r\n        <div class=\"stat-card\">\r\n          <h3>Today's Appointments</h3>\r\n          <p class=\"stat-number\">{{ stats.todayAppointments }}</p>\r\n        </div>\r\n\r\n        <div class=\"stat-card\">\r\n          <h3>Pending Treatments</h3>\r\n          <p class=\"stat-number\">{{ stats.pendingTreatments }}</p>\r\n        </div>\r\n\r\n        <div class=\"stat-card\">\r\n          <h3>Completed Cases</h3>\r\n          <p class=\"stat-number\">{{ stats.completedCases }}</p>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Appointments Table -->\r\n      <section class=\"appointments-section\">\r\n        <h2>Upcoming Appointments (Next 7 Days)</h2>\r\n        <table class=\"appointments-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Date</th>\r\n              <th>Time</th>\r\n              <th>Patient</th>\r\n              <th>Status</th>\r\n              <th>Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"appt in appointments\" :key=\"appt.id\">\r\n              <td>{{ appt.date }}</td>\r\n              <td>{{ appt.time }}</td>\r\n              <td>{{ appt.patient.name }}</td>\r\n              <td>{{ appt.status }}</td>\r\n              <td>\r\n                <button @click=\"markCompleted(appt.id)\">Complete</button>\r\n                <button @click=\"markCancelled(appt.id)\">Cancel</button>\r\n                <button @click=\"openTreatmentModal(appt.id)\">Add Treatment</button>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </section>\r\n\r\n      <!-- Assigned Patients -->\r\n      <section class=\"patients-section\">\r\n        <h2>Assigned Patients</h2>\r\n        <ul>\r\n          <li v-for=\"p in patients\" :key=\"p.id\">\r\n            {{ p.name }} ({{ p.age }} yrs, {{ p.gender }})\r\n            <button @click=\"viewHistory(p.id)\">View History</button>\r\n          </li>\r\n        </ul>\r\n      </section>\r\n\r\n      <!-- Patient History -->\r\n      <div v-if=\"history.length > 0\" class=\"history-section\">\r\n        <h3>Patient History</h3>\r\n        <ul>\r\n          <li v-for=\"h in history\" :key=\"h.appointment_id\">\r\n            {{ h.date }} {{ h.time }} - {{ h.status }}\r\n            <span v-if=\"h.treatment\">\r\n              | Diagnosis: {{ h.treatment.diagnosis }}\r\n            </span>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n\r\n      <!-- Treatment Modal -->\r\n      <div v-if=\"showTreatmentModal\" class=\"modal\">\r\n        <h3>Add Treatment</h3>\r\n        <form @submit.prevent=\"submitTreatment\">\r\n          <label>Diagnosis:</label>\r\n          <input v-model=\"treatment.diagnosis\" required />\r\n          <br />\r\n          <label>Prescription:</label>\r\n          <input v-model=\"treatment.prescription\" />\r\n          <br />\r\n          <label>Notes:</label>\r\n          <textarea v-model=\"treatment.notes\"></textarea>\r\n          <br />\r\n          <button type=\"submit\">Save</button>\r\n          <button @click=\"closeTreatmentModal\">Cancel</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { clearToken, getUserRole } from \"../utils/tokenManager\";\r\n\r\nexport default {\r\n  name: \"DoctorDashboard\",\r\n  data() {\r\n    return {\r\n      stats: {\r\n        todayAppointments: 0,\r\n        pendingTreatments: 0,\r\n        completedCases: 0,\r\n      },\r\n      appointments: [],\r\n      patients: [],\r\n      history: [],\r\n      loading: true,\r\n      error: null,\r\n      showTreatmentModal: false,\r\n      selectedAppointmentId: null,\r\n      treatment: { diagnosis: \"\", prescription: \"\", notes: \"\" },\r\n    };\r\n  },\r\n  async mounted() {\r\n    if (getUserRole() !== \"Doctor\") {\r\n      this.error = \"Unauthorized: Doctor access required\";\r\n      this.$router.push(\"/login\");\r\n      return;\r\n    }\r\n    this.fetchDashboard();\r\n  },\r\n  methods: {\r\n    async fetchDashboard() {\r\n      try {\r\n        const res = await axios.get(\"/doctor/dashboard\", {\r\n          headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` },\r\n        });\r\n\r\n        this.appointments = res.data.appointments_next_7_days;\r\n        this.patients = res.data.assigned_patients;\r\n\r\n        // Calculate stats dynamically\r\n        const today = new Date().toISOString().split(\"T\")[0];\r\n        this.stats.todayAppointments = this.appointments.filter(\r\n          (a) => a.date === today\r\n        ).length;\r\n\r\n        this.stats.pendingTreatments = this.appointments.filter(\r\n          (a) => a.status === \"Booked\"\r\n        ).length;\r\n\r\n        this.stats.completedCases = this.appointments.filter(\r\n          (a) => a.status === \"Completed\"\r\n        ).length;\r\n\r\n        this.loading = false;\r\n      } catch (err) {\r\n        this.error = \"Failed to load dashboard data\";\r\n        this.loading = false;\r\n      }\r\n    },\r\n    async markCompleted(id) {\r\n      await axios.post(\r\n        \"/doctor/appointment/update-status\",\r\n        { appointment_id: id, status: \"Completed\" },\r\n        { headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` } }\r\n      );\r\n      this.fetchDashboard();\r\n    },\r\n    async markCancelled(id) {\r\n      await axios.post(\r\n        \"/doctor/appointment/update-status\",\r\n        { appointment_id: id, status: \"Cancelled\" },\r\n        { headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` } }\r\n      );\r\n      this.fetchDashboard();\r\n    },\r\n    openTreatmentModal(id) {\r\n      this.selectedAppointmentId = id;\r\n      this.showTreatmentModal = true;\r\n    },\r\n    closeTreatmentModal() {\r\n      this.showTreatmentModal = false;\r\n    },\r\n    async submitTreatment() {\r\n      await axios.post(\r\n        \"/doctor/treatment/add\",\r\n        {\r\n          appointment_id: this.selectedAppointmentId,\r\n          diagnosis: this.treatment.diagnosis,\r\n          prescription: this.treatment.prescription,\r\n          notes: this.treatment.notes,\r\n        },\r\n        { headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` } }\r\n      );\r\n      this.closeTreatmentModal();\r\n      this.fetchDashboard();\r\n    },\r\n    async viewHistory(patientId) {\r\n      const res = await axios.get(`/doctor/patient/history/${patientId}`, {\r\n        headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` },\r\n      });\r\n      this.history = res.data.medical_history;\r\n    },\r\n    logout() {\r\n      clearToken();\r\n      this.$router.push(\"/login\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.appointments-section {\r\n  margin-top: 30px;\r\n}\r\n.appointments-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n.appointments-table th,\r\n.appointments-table td {\r\n  border: 1px solid #ddd;\r\n  padding: 8px;\r\n}\r\n.appointments-table th {\r\n  background-color: #f2f2f2;\r\n}\r\n.patients-section {\r\n  margin-top: 30px;\r\n}\r\n.history-section {\r\n  margin-top: 20px;\r\n  background: #fafafa;\r\n  padding: 10px;\r\n  border: 1px solid #ddd;\r\n}\r\n.modal {\r\n  border: 1px solid #000;\r\n  padding: 10px;\r\n  background: #eee;\r\n  margin-top: 20px;\r\n}\r\n</style>","import { render } from \"./DoctorDashboard.vue?vue&type=template&id=a370ce44&scoped=true\"\nimport script from \"./DoctorDashboard.vue?vue&type=script&lang=js\"\nexport * from \"./DoctorDashboard.vue?vue&type=script&lang=js\"\n\nimport \"./DoctorDashboard.vue?vue&type=style&index=0&id=a370ce44&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a370ce44\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","onClick","_cache","args","$options","logout","$data","loading","_hoisted_3","error","_hoisted_4","_toDisplayString","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","stats","todayAppointments","_hoisted_9","_hoisted_10","pendingTreatments","_hoisted_11","_hoisted_12","completedCases","_hoisted_13","_hoisted_14","_Fragment","_renderList","appointments","appt","key","id","date","time","patient","name","status","$event","markCompleted","_hoisted_15","markCancelled","_hoisted_16","openTreatmentModal","_hoisted_17","_hoisted_18","patients","p","age","gender","viewHistory","_hoisted_19","history","length","_hoisted_20","h","appointment_id","treatment","_hoisted_21","diagnosis","showTreatmentModal","_hoisted_22","onSubmit","_withModifiers","submitTreatment","required","prescription","notes","type","closeTreatmentModal","data","selectedAppointmentId","mounted","getUserRole","this","$router","push","fetchDashboard","methods","res","axios","get","headers","Authorization","localStorage","getItem","appointments_next_7_days","assigned_patients","today","Date","toISOString","split","filter","a","err","post","patientId","medical_history","clearToken","__exports__","render"],"sourceRoot":""}