"use strict";(self["webpackChunkfrontend_clean"]=self["webpackChunkfrontend_clean"]||[]).push([[720],{2720:function(t,e,a){a.r(e),a.d(e,{default:function(){return z}});var n=a(6768),s=a(4232),o=a(5130);const i={class:"dashboard-container"},l={class:"header"},r={key:0,class:"loading"},d={key:1,class:"error-message"},u={key:2},p={class:"dashboard-stats"},c={class:"stat-card"},m={class:"stat-number"},h={class:"stat-card"},k={class:"stat-number"},L={class:"stat-card"},g={class:"stat-number"},b={class:"appointments-section"},C={class:"appointments-table"},y=["onClick"],v=["onClick"],_=["onClick"],A={class:"patients-section"},T=["onClick"],f={key:0,class:"history-section"},D={key:0},w={key:1,class:"modal"};function E(t,e,a,E,I,X){return(0,n.uX)(),(0,n.CE)("div",i,[(0,n.Lk)("div",l,[e[6]||(e[6]=(0,n.Lk)("h1",null,"Doctor Dashboard",-1)),(0,n.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>X.logout&&X.logout(...t)),class:"logout-btn"},"Logout")]),I.loading?((0,n.uX)(),(0,n.CE)("div",r,"Loading dashboard data...")):I.error?((0,n.uX)(),(0,n.CE)("div",d,(0,s.v_)(I.error),1)):((0,n.uX)(),(0,n.CE)("div",u,[(0,n.Lk)("div",p,[(0,n.Lk)("div",c,[e[7]||(e[7]=(0,n.Lk)("h3",null,"Today's Appointments",-1)),(0,n.Lk)("p",m,(0,s.v_)(I.stats.todayAppointments),1)]),(0,n.Lk)("div",h,[e[8]||(e[8]=(0,n.Lk)("h3",null,"Pending Treatments",-1)),(0,n.Lk)("p",k,(0,s.v_)(I.stats.pendingTreatments),1)]),(0,n.Lk)("div",L,[e[9]||(e[9]=(0,n.Lk)("h3",null,"Completed Cases",-1)),(0,n.Lk)("p",g,(0,s.v_)(I.stats.completedCases),1)])]),(0,n.Lk)("section",b,[e[11]||(e[11]=(0,n.Lk)("h2",null,"Upcoming Appointments (Next 7 Days)",-1)),(0,n.Lk)("table",C,[e[10]||(e[10]=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Date"),(0,n.Lk)("th",null,"Time"),(0,n.Lk)("th",null,"Patient"),(0,n.Lk)("th",null,"Status"),(0,n.Lk)("th",null,"Actions")])],-1)),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(I.appointments,t=>((0,n.uX)(),(0,n.CE)("tr",{key:t.id},[(0,n.Lk)("td",null,(0,s.v_)(t.date),1),(0,n.Lk)("td",null,(0,s.v_)(t.time),1),(0,n.Lk)("td",null,(0,s.v_)(t.patient.name),1),(0,n.Lk)("td",null,(0,s.v_)(t.status),1),(0,n.Lk)("td",null,[(0,n.Lk)("button",{onClick:e=>X.markCompleted(t.id)},"Complete",8,y),(0,n.Lk)("button",{onClick:e=>X.markCancelled(t.id)},"Cancel",8,v),(0,n.Lk)("button",{onClick:e=>X.openTreatmentModal(t.id)},"Add Treatment",8,_)])]))),128))])])]),(0,n.Lk)("section",A,[e[12]||(e[12]=(0,n.Lk)("h2",null,"Assigned Patients",-1)),(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(I.patients,t=>((0,n.uX)(),(0,n.CE)("li",{key:t.id},[(0,n.eW)((0,s.v_)(t.name)+" ("+(0,s.v_)(t.age)+" yrs, "+(0,s.v_)(t.gender)+") ",1),(0,n.Lk)("button",{onClick:e=>X.viewHistory(t.id)},"View History",8,T)]))),128))])]),I.history.length>0?((0,n.uX)(),(0,n.CE)("div",f,[e[13]||(e[13]=(0,n.Lk)("h3",null,"Patient History",-1)),(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(I.history,t=>((0,n.uX)(),(0,n.CE)("li",{key:t.appointment_id},[(0,n.eW)((0,s.v_)(t.date)+" "+(0,s.v_)(t.time)+" - "+(0,s.v_)(t.status)+" ",1),t.treatment?((0,n.uX)(),(0,n.CE)("span",D," | Diagnosis: "+(0,s.v_)(t.treatment.diagnosis),1)):(0,n.Q3)("",!0)]))),128))])])):(0,n.Q3)("",!0),I.showTreatmentModal?((0,n.uX)(),(0,n.CE)("div",w,[e[21]||(e[21]=(0,n.Lk)("h3",null,"Add Treatment",-1)),(0,n.Lk)("form",{onSubmit:e[5]||(e[5]=(0,o.D$)((...t)=>X.submitTreatment&&X.submitTreatment(...t),["prevent"]))},[e[14]||(e[14]=(0,n.Lk)("label",null,"Diagnosis:",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>I.treatment.diagnosis=t),required:""},null,512),[[o.Jo,I.treatment.diagnosis]]),e[15]||(e[15]=(0,n.Lk)("br",null,null,-1)),e[16]||(e[16]=(0,n.Lk)("label",null,"Prescription:",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>I.treatment.prescription=t)},null,512),[[o.Jo,I.treatment.prescription]]),e[17]||(e[17]=(0,n.Lk)("br",null,null,-1)),e[18]||(e[18]=(0,n.Lk)("label",null,"Notes:",-1)),(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":e[3]||(e[3]=t=>I.treatment.notes=t)},null,512),[[o.Jo,I.treatment.notes]]),e[19]||(e[19]=(0,n.Lk)("br",null,null,-1)),e[20]||(e[20]=(0,n.Lk)("button",{type:"submit"},"Save",-1)),(0,n.Lk)("button",{onClick:e[4]||(e[4]=(...t)=>X.closeTreatmentModal&&X.closeTreatmentModal(...t))},"Cancel")],32)])):(0,n.Q3)("",!0)]))])}a(4114),a(8111),a(2489);var I=a(4373),X=a(2549),M={name:"DoctorDashboard",data(){return{stats:{todayAppointments:0,pendingTreatments:0,completedCases:0},appointments:[],patients:[],history:[],loading:!0,error:null,showTreatmentModal:!1,selectedAppointmentId:null,treatment:{diagnosis:"",prescription:"",notes:""}}},async mounted(){if("Doctor"!==(0,X.uG)())return this.error="Unauthorized: Doctor access required",void this.$router.push("/login");this.fetchDashboard()},methods:{async fetchDashboard(){try{const t=await I.A.get("/doctor/dashboard",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});this.appointments=t.data.appointments_next_7_days,this.patients=t.data.assigned_patients;const e=(new Date).toISOString().split("T")[0];this.stats.todayAppointments=this.appointments.filter(t=>t.date===e).length,this.stats.pendingTreatments=this.appointments.filter(t=>"Booked"===t.status).length,this.stats.completedCases=this.appointments.filter(t=>"Completed"===t.status).length,this.loading=!1}catch(t){this.error="Failed to load dashboard data",this.loading=!1}},async markCompleted(t){await I.A.post("/doctor/appointment/update-status",{appointment_id:t,status:"Completed"},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),this.fetchDashboard()},async markCancelled(t){await I.A.post("/doctor/appointment/update-status",{appointment_id:t,status:"Cancelled"},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),this.fetchDashboard()},openTreatmentModal(t){this.selectedAppointmentId=t,this.showTreatmentModal=!0},closeTreatmentModal(){this.showTreatmentModal=!1},async submitTreatment(){await I.A.post("/doctor/treatment/add",{appointment_id:this.selectedAppointmentId,diagnosis:this.treatment.diagnosis,prescription:this.treatment.prescription,notes:this.treatment.notes},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),this.closeTreatmentModal(),this.fetchDashboard()},async viewHistory(t){const e=await I.A.get(`/doctor/patient/history/${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});this.history=e.data.medical_history},logout(){(0,X.L)(),this.$router.push("/login")}}},S=a(1241);const $=(0,S.A)(M,[["render",E],["__scopeId","data-v-a370ce44"]]);var z=$}}]);
//# sourceMappingURL=720.51c57433.js.map