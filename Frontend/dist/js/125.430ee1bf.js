"use strict";(self["webpackChunkhospital_management_system"]=self["webpackChunkhospital_management_system"]||[]).push([[125],{125:(t,e,a)=>{a.r(e),a.d(e,{default:()=>ea});var o=a(641),s=a(751),l=a(33);const n={class:"dashboard-container"},i={class:"header"},r={class:"action-buttons"},d={class:"search-section"},c={class:"search-inputs"},u={class:"search-container"},m={key:0,class:"search-results-dropdown"},p=["onClick"],h={class:"result-info"},k={class:"result-name"},b={class:"result-meta"},L={key:0,class:"loading"},v={key:1,class:"error-message"},y={key:2},f={class:"dashboard-stats"},g={class:"stat-card"},D={class:"stat-number"},C={class:"stat-card"},E={class:"stat-number"},w={class:"stat-card"},_={class:"stat-number"},A={class:"section"},M={key:0,class:"no-data"},X={key:1,class:"table-responsive"},S={class:"table table-hover"},I={key:0,class:"badge bg-danger"},P={key:1,class:"badge bg-success"},z={class:"actions"},Q=["onClick"],B=["onClick"],F=["onClick"],x={class:"section"},U={key:0,class:"no-data"},W={key:1,class:"table-responsive"},$={class:"table table-hover"},T={key:0,class:"badge bg-danger"},N={key:1,class:"badge bg-success"},q={class:"actions"},J=["onClick"],R=["onClick"],V=["onClick"],j={class:"section"},G={key:0,class:"no-data"},K={key:1,class:"table-responsive"},O={class:"table table-hover"},H={class:"actions"},Y=["onClick"],Z={class:"section"},tt={key:0,class:"no-data"},et={key:1,class:"table-responsive"},at={class:"table table-hover"},ot={class:"actions"},st=["onClick"];function lt(t,e,a,lt,nt,it){const rt=(0,o.g2)("EditDoctorModal"),dt=(0,o.g2)("EditPatientModal"),ct=(0,o.g2)("DeleteConfirmationModal"),ut=(0,o.g2)("BlacklistModal"),mt=(0,o.g2)("AppointmentDetailModal"),pt=(0,o.g2)("CreateDoctorModal");return(0,o.uX)(),(0,o.CE)("div",n,[(0,o.Lk)("div",i,[e[6]||(e[6]=(0,o.Lk)("h1",null,"Admin Dashboard",-1)),(0,o.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>it.logout&&it.logout(...t)),class:"logout-btn"},"Logout")]),(0,o.Lk)("div",r,[(0,o.Lk)("button",{class:"btn btn-primary",onClick:e[1]||(e[1]=(...t)=>it.openCreateModal&&it.openCreateModal(...t))},"+ Create Doctor")]),(0,o.Lk)("div",d,[(0,o.Lk)("div",c,[(0,o.Lk)("div",u,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>nt.searchQuery=t),type:"text",class:"form-control search-input",placeholder:"Search doctor/patient by name, specialization, email, or contact...",onInput:e[3]||(e[3]=(...t)=>it.performLiveSearch&&it.performLiveSearch(...t))},null,544),[[s.Jo,nt.searchQuery]]),nt.isSearching&&nt.searchResults.length>0?((0,o.uX)(),(0,o.CE)("div",m,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(nt.searchResults,t=>((0,o.uX)(),(0,o.CE)("div",{key:`${t.type}-${t.id}`,class:"search-result-item",onClick:e=>it.openDetailsFromSearch(t)},[(0,o.Lk)("div",{class:(0,l.C4)(["result-badge",`badge-${t.type}`])},(0,l.v_)(t.type),3),(0,o.Lk)("div",h,[(0,o.Lk)("div",k,(0,l.v_)(t.name),1),(0,o.Lk)("div",b,(0,l.v_)(t.meta),1)])],8,p))),128))])):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:e[4]||(e[4]=(...t)=>it.clearSearch&&it.clearSearch(...t)),class:"btn btn-outline-secondary"},"Clear")])]),nt.loading?((0,o.uX)(),(0,o.CE)("div",L," Loading dashboard data... ")):nt.error?((0,o.uX)(),(0,o.CE)("div",v,(0,l.v_)(nt.error),1)):((0,o.uX)(),(0,o.CE)("div",y,[(0,o.Lk)("div",f,[(0,o.Lk)("div",g,[e[7]||(e[7]=(0,o.Lk)("h3",null,"Total Patients",-1)),(0,o.Lk)("p",D,(0,l.v_)(nt.stats.patients),1)]),(0,o.Lk)("div",C,[e[8]||(e[8]=(0,o.Lk)("h3",null,"Total Doctors",-1)),(0,o.Lk)("p",E,(0,l.v_)(nt.stats.doctors),1)]),(0,o.Lk)("div",w,[e[9]||(e[9]=(0,o.Lk)("h3",null,"Total Appointments",-1)),(0,o.Lk)("p",_,(0,l.v_)(nt.stats.appointments),1)])]),(0,o.Lk)("div",A,[e[11]||(e[11]=(0,o.Lk)("h2",null,"Registered Doctors",-1)),0===it.displayedDoctors.length?((0,o.uX)(),(0,o.CE)("div",M," No doctors found ")):((0,o.uX)(),(0,o.CE)("div",X,[(0,o.Lk)("table",S,[e[10]||(e[10]=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"ID"),(0,o.Lk)("th",null,"Name"),(0,o.Lk)("th",null,"Email"),(0,o.Lk)("th",null,"Specialization"),(0,o.Lk)("th",null,"Availability"),(0,o.Lk)("th",null,"Status"),(0,o.Lk)("th",null,"Actions")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(it.displayedDoctors,t=>((0,o.uX)(),(0,o.CE)("tr",{key:t.id,class:(0,l.C4)({"blacklisted-row":t.is_blacklisted})},[(0,o.Lk)("td",null,(0,l.v_)(t.id),1),(0,o.Lk)("td",null,(0,l.v_)(t.name),1),(0,o.Lk)("td",null,(0,l.v_)(t.email),1),(0,o.Lk)("td",null,(0,l.v_)(t.specialization),1),(0,o.Lk)("td",null,(0,l.v_)(t.availability),1),(0,o.Lk)("td",null,[t.is_blacklisted?((0,o.uX)(),(0,o.CE)("span",I,"BLACKLISTED")):((0,o.uX)(),(0,o.CE)("span",P,"Active"))]),(0,o.Lk)("td",z,[(0,o.Lk)("button",{onClick:e=>it.openEditDoctorModal(t),class:"btn btn-sm btn-info"}," Edit ",8,Q),(0,o.Lk)("button",{onClick:e=>it.openDeleteModal(t,"doctor"),class:"btn btn-sm btn-danger"}," Delete ",8,B),(0,o.Lk)("button",{onClick:e=>it.openBlacklistModal(t,"doctor"),class:"btn btn-sm btn-warning"}," Blacklist ",8,F)])],2))),128))])])]))]),(0,o.Lk)("div",x,[e[13]||(e[13]=(0,o.Lk)("h2",null,"Registered Patients",-1)),0===it.displayedPatients.length?((0,o.uX)(),(0,o.CE)("div",U," No patients found ")):((0,o.uX)(),(0,o.CE)("div",W,[(0,o.Lk)("table",$,[e[12]||(e[12]=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"ID"),(0,o.Lk)("th",null,"Name"),(0,o.Lk)("th",null,"Email"),(0,o.Lk)("th",null,"Age"),(0,o.Lk)("th",null,"Gender"),(0,o.Lk)("th",null,"Contact Info"),(0,o.Lk)("th",null,"Status"),(0,o.Lk)("th",null,"Actions")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(it.displayedPatients,t=>((0,o.uX)(),(0,o.CE)("tr",{key:t.id,class:(0,l.C4)({"blacklisted-row":t.is_blacklisted})},[(0,o.Lk)("td",null,(0,l.v_)(t.id),1),(0,o.Lk)("td",null,(0,l.v_)(t.name),1),(0,o.Lk)("td",null,(0,l.v_)(t.email),1),(0,o.Lk)("td",null,(0,l.v_)(t.age),1),(0,o.Lk)("td",null,(0,l.v_)(t.gender),1),(0,o.Lk)("td",null,(0,l.v_)(t.contact_info),1),(0,o.Lk)("td",null,[t.is_blacklisted?((0,o.uX)(),(0,o.CE)("span",T,"BLACKLISTED")):((0,o.uX)(),(0,o.CE)("span",N,"Active"))]),(0,o.Lk)("td",q,[(0,o.Lk)("button",{onClick:e=>it.openEditPatientModal(t),class:"btn btn-sm btn-info"}," Edit ",8,J),(0,o.Lk)("button",{onClick:e=>it.openDeleteModal(t,"patient"),class:"btn btn-sm btn-danger"}," Delete ",8,R),(0,o.Lk)("button",{onClick:e=>it.openBlacklistModal(t,"patient"),class:"btn btn-sm btn-warning"}," Blacklist ",8,V)])],2))),128))])])]))]),(0,o.Lk)("div",j,[e[15]||(e[15]=(0,o.Lk)("h2",null,"Upcoming Appointments",-1)),0===nt.upcomingAppointments.length?((0,o.uX)(),(0,o.CE)("div",G," No upcoming appointments ")):((0,o.uX)(),(0,o.CE)("div",K,[(0,o.Lk)("table",O,[e[14]||(e[14]=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"ID"),(0,o.Lk)("th",null,"Patient"),(0,o.Lk)("th",null,"Doctor"),(0,o.Lk)("th",null,"Date"),(0,o.Lk)("th",null,"Time"),(0,o.Lk)("th",null,"Status"),(0,o.Lk)("th",null,"Actions")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(nt.upcomingAppointments,t=>((0,o.uX)(),(0,o.CE)("tr",{key:t.id},[(0,o.Lk)("td",null,(0,l.v_)(t.id),1),(0,o.Lk)("td",null,(0,l.v_)(t.patient),1),(0,o.Lk)("td",null,(0,l.v_)(t.doctor),1),(0,o.Lk)("td",null,(0,l.v_)(it.formatDate(t.date)),1),(0,o.Lk)("td",null,(0,l.v_)(t.time),1),(0,o.Lk)("td",null,[(0,o.Lk)("span",{class:(0,l.C4)(["badge","Completed"===t.status?"bg-success":"bg-info"])},(0,l.v_)(t.status),3)]),(0,o.Lk)("td",H,[(0,o.Lk)("button",{onClick:e=>it.openAppointmentDetail(t.id),class:"btn btn-sm btn-primary"}," View ",8,Y)])]))),128))])])]))]),(0,o.Lk)("div",Z,[e[17]||(e[17]=(0,o.Lk)("h2",null,"Past Appointments",-1)),0===nt.pastAppointments.length?((0,o.uX)(),(0,o.CE)("div",tt," No past appointments ")):((0,o.uX)(),(0,o.CE)("div",et,[(0,o.Lk)("table",at,[e[16]||(e[16]=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"ID"),(0,o.Lk)("th",null,"Patient"),(0,o.Lk)("th",null,"Doctor"),(0,o.Lk)("th",null,"Date"),(0,o.Lk)("th",null,"Time"),(0,o.Lk)("th",null,"Status"),(0,o.Lk)("th",null,"Actions")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(nt.pastAppointments,t=>((0,o.uX)(),(0,o.CE)("tr",{key:t.id},[(0,o.Lk)("td",null,(0,l.v_)(t.id),1),(0,o.Lk)("td",null,(0,l.v_)(t.patient),1),(0,o.Lk)("td",null,(0,l.v_)(t.doctor),1),(0,o.Lk)("td",null,(0,l.v_)(it.formatDate(t.date)),1),(0,o.Lk)("td",null,(0,l.v_)(t.time),1),(0,o.Lk)("td",null,[(0,o.Lk)("span",{class:(0,l.C4)(["badge","Completed"===t.status?"bg-success":"bg-info"])},(0,l.v_)(t.status),3)]),(0,o.Lk)("td",ot,[(0,o.Lk)("button",{onClick:e=>it.openAppointmentDetail(t.id),class:"btn btn-sm btn-primary"}," View ",8,st)])]))),128))])])]))])])),nt.selectedDoctor&&nt.selectedDoctor.isDoctor?((0,o.uX)(),(0,o.Wv)(rt,{key:3,doctor:nt.selectedDoctor,onUpdated:it.fetchDashboardData},null,8,["doctor","onUpdated"])):(0,o.Q3)("",!0),nt.selectedPatient&&!nt.selectedDoctor?((0,o.uX)(),(0,o.Wv)(dt,{key:4,patient:nt.selectedPatient,onUpdated:it.fetchDashboardData},null,8,["patient","onUpdated"])):(0,o.Q3)("",!0),nt.selectedEntity?((0,o.uX)(),(0,o.Wv)(ct,{key:5,entity:nt.selectedEntity,role:nt.selectedRole,onDeleted:it.fetchDashboardData},null,8,["entity","role","onDeleted"])):(0,o.Q3)("",!0),nt.selectedEntity?((0,o.uX)(),(0,o.Wv)(ut,{key:6,entity:nt.selectedEntity,role:nt.selectedRole,onBlacklisted:it.fetchDashboardData},null,8,["entity","role","onBlacklisted"])):(0,o.Q3)("",!0),nt.selectedAppointmentId?((0,o.uX)(),(0,o.Wv)(mt,{key:7,"appointment-id":nt.selectedAppointmentId,onClosed:e[5]||(e[5]=t=>nt.selectedAppointmentId=null)},null,8,["appointment-id"])):(0,o.Q3)("",!0),(0,o.bF)(pt,{onCreated:it.fetchDashboardData},null,8,["onCreated"])])}var nt=a(328);const it={class:"modal fade",id:"editDoctorModal",tabindex:"-1"},rt={class:"modal-dialog"},dt={class:"modal-content"},ct={class:"modal-body"},ut={class:"mb-3"},mt={class:"mb-3"},pt={class:"mb-3"};function ht(t,e,a,l,n,i){return(0,o.uX)(),(0,o.CE)("div",it,[(0,o.Lk)("div",rt,[(0,o.Lk)("div",dt,[e[8]||(e[8]=(0,o.Lk)("div",{class:"modal-header"},[(0,o.Lk)("h5",{class:"modal-title"},"Edit Doctor"),(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1)),(0,o.Lk)("div",ct,[(0,o.Lk)("form",{onSubmit:e[3]||(e[3]=(0,s.D$)((...t)=>i.submitEdit&&i.submitEdit(...t),["prevent"]))},[(0,o.Lk)("div",ut,[e[4]||(e[4]=(0,o.Lk)("label",null,"Name",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>a.doctor.name=t),type:"text",class:"form-control",required:""},null,512),[[s.Jo,a.doctor.name]])]),(0,o.Lk)("div",mt,[e[5]||(e[5]=(0,o.Lk)("label",null,"Specialization",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>a.doctor.specialization=t),type:"text",class:"form-control",required:""},null,512),[[s.Jo,a.doctor.specialization]])]),(0,o.Lk)("div",pt,[e[6]||(e[6]=(0,o.Lk)("label",null,"Availability",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>a.doctor.availability=t),type:"text",class:"form-control",required:""},null,512),[[s.Jo,a.doctor.availability]])]),e[7]||(e[7]=(0,o.Lk)("button",{type:"submit",class:"btn btn-primary"},"Save Changes",-1))],32)])])])])}const kt={props:["doctor"],methods:{async submitEdit(){try{const t=(0,nt.z5)(),e=await fetch(`http://localhost:5000/api/admin/doctors/${this.doctor.id}`,{method:"PATCH",headers:{...t},body:JSON.stringify(this.doctor)});if(!e.ok){const t=await e.json().catch(()=>({}));throw new Error(t.msg||t.error||"Failed to update doctor")}const a=document.getElementById("editDoctorModal");if(a&&"undefined"!==typeof bootstrap){const t=bootstrap.Modal.getInstance(a)||new bootstrap.Modal(a);t.hide()}this.$emit("updated"),alert("Doctor updated successfully")}catch(t){alert(t.message||"Error updating doctor")}}}};var bt=a(262);const Lt=(0,bt.A)(kt,[["render",ht]]),vt=Lt,yt={class:"modal fade",id:"editPatientModal",tabindex:"-1"},ft={class:"modal-dialog"},gt={class:"modal-content"},Dt={class:"modal-body"},Ct={class:"mb-3"},Et={class:"mb-3"},wt={class:"mb-3"},_t={class:"mb-3"},At={class:"mb-3"},Mt={key:0,class:"alert alert-danger",role:"alert"},Xt={key:1,class:"alert alert-success",role:"alert"},St={class:"modal-footer"},It=["disabled"],Pt={key:0,class:"spinner-border spinner-border-sm me-2"};function zt(t,e,a,n,i,r){return(0,o.uX)(),(0,o.CE)("div",yt,[(0,o.Lk)("div",ft,[(0,o.Lk)("div",gt,[e[13]||(e[13]=(0,o.Lk)("div",{class:"modal-header"},[(0,o.Lk)("h5",{class:"modal-title"},"Edit Patient"),(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1)),(0,o.Lk)("div",Dt,[(0,o.Lk)("form",{onSubmit:e[5]||(e[5]=(0,s.D$)((...t)=>r.submitEdit&&r.submitEdit(...t),["prevent"]))},[(0,o.Lk)("div",Ct,[e[6]||(e[6]=(0,o.Lk)("label",{class:"form-label"},"Name",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>i.formData.name=t),type:"text",class:"form-control",required:""},null,512),[[s.Jo,i.formData.name]])]),(0,o.Lk)("div",Et,[e[7]||(e[7]=(0,o.Lk)("label",{class:"form-label"},"Email",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>i.formData.email=t),type:"email",class:"form-control",required:""},null,512),[[s.Jo,i.formData.email]])]),(0,o.Lk)("div",wt,[e[8]||(e[8]=(0,o.Lk)("label",{class:"form-label"},"Age",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>i.formData.age=t),type:"number",class:"form-control"},null,512),[[s.Jo,i.formData.age]])]),(0,o.Lk)("div",_t,[e[10]||(e[10]=(0,o.Lk)("label",{class:"form-label"},"Gender",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>i.formData.gender=t),class:"form-control"},[...e[9]||(e[9]=[(0,o.Lk)("option",{value:""},"Select Gender",-1),(0,o.Lk)("option",{value:"M"},"Male",-1),(0,o.Lk)("option",{value:"F"},"Female",-1),(0,o.Lk)("option",{value:"Other"},"Other",-1)])],512),[[s.u1,i.formData.gender]])]),(0,o.Lk)("div",At,[e[11]||(e[11]=(0,o.Lk)("label",{class:"form-label"},"Contact Info",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>i.formData.contact_info=t),type:"text",class:"form-control"},null,512),[[s.Jo,i.formData.contact_info]])]),i.error?((0,o.uX)(),(0,o.CE)("div",Mt,(0,l.v_)(i.error),1)):(0,o.Q3)("",!0),i.success?((0,o.uX)(),(0,o.CE)("div",Xt,(0,l.v_)(i.success),1)):(0,o.Q3)("",!0),(0,o.Lk)("div",St,[e[12]||(e[12]=(0,o.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Cancel ",-1)),(0,o.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:i.isLoading},[i.isLoading?((0,o.uX)(),(0,o.CE)("span",Pt)):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,l.v_)(i.isLoading?"Saving...":"Save Changes"),1)],8,It)])],32)])])])])}const Qt={name:"EditPatientModal",props:["patient"],data(){return{formData:{name:"",email:"",age:"",gender:"",contact_info:""},isLoading:!1,error:null,success:null}},watch:{patient(t){t&&(this.formData={name:t.name||"",email:t.email||"",age:t.age||"",gender:t.gender||"",contact_info:t.contact_info||""})}},methods:{async submitEdit(){this.isLoading=!0,this.error=null,this.success=null;try{const t=(0,nt.z5)(),e=await fetch(`http://localhost:5000/api/admin/patients/${this.patient.id}`,{method:"PATCH",headers:{...t},body:JSON.stringify(this.formData)});if(!e.ok){const t=await e.json().catch(()=>({}));throw new Error(t.msg||t.error||"Failed to update patient")}this.success="Patient updated successfully!";const a=document.getElementById("editPatientModal");if(a&&"undefined"!==typeof bootstrap){const t=bootstrap.Modal.getInstance(a)||new bootstrap.Modal(a);t.hide()}this.$emit("updated"),setTimeout(()=>{this.resetForm()},1500)}catch(t){this.error=t.message||"Error updating patient",console.error("Edit patient error:",t)}finally{this.isLoading=!1}},resetForm(){this.formData={name:"",email:"",age:"",gender:"",contact_info:""},this.error=null,this.success=null}}},Bt=(0,bt.A)(Qt,[["render",zt],["__scopeId","data-v-429e0e0e"]]),Ft=Bt,xt={class:"modal fade",id:"deleteConfirmationModal",tabindex:"-1"},Ut={class:"modal-dialog"},Wt={class:"modal-content"},$t={class:"modal-body"},Tt={key:0,class:"alert alert-danger"},Nt=["disabled"],qt={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Jt={key:1},Rt={key:2};function Vt(t,e,a,s,n,i){return(0,o.uX)(),(0,o.CE)("div",xt,[(0,o.Lk)("div",Ut,[(0,o.Lk)("div",Wt,[e[4]||(e[4]=(0,o.Lk)("div",{class:"modal-header bg-danger text-white"},[(0,o.Lk)("h5",{class:"modal-title"},"Confirm Deletion"),(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1)),(0,o.Lk)("div",$t,[(0,o.Lk)("p",null,[e[1]||(e[1]=(0,o.eW)("Are you sure you want to delete ",-1)),(0,o.Lk)("strong",null,(0,l.v_)(a.entity.name),1),e[2]||(e[2]=(0,o.eW)("?",-1))]),n.error?((0,o.uX)(),(0,o.CE)("div",Tt,(0,l.v_)(n.error),1)):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>i.confirmDelete&&i.confirmDelete(...t)),class:"btn btn-danger",disabled:n.loading},[n.loading?((0,o.uX)(),(0,o.CE)("span",qt)):(0,o.Q3)("",!0),n.loading?((0,o.uX)(),(0,o.CE)("span",Jt," Deleting...")):((0,o.uX)(),(0,o.CE)("span",Rt," Yes, Delete"))],8,Nt),e[3]||(e[3]=(0,o.Lk)("button",{class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1))])])])])}const jt={props:["entity","role"],data(){return{loading:!1,error:null}},methods:{async confirmDelete(){this.loading=!0,this.error=null;try{const e={Authorization:`Bearer ${localStorage.getItem("access_token")}`};let a=null;if("doctor"===this.role)a=`http://localhost:5000/api/admin/doctors/${this.entity.id}`;else{if("patient"!==this.role)throw new Error("Unknown role for deletion");a=`http://localhost:5000/api/admin/patients/${this.entity.id}`}const o=await fetch(a,{method:"DELETE",headers:e});if(!o.ok){let e="Failed to delete entity";try{e=await o.text()}catch(t){}throw new Error(e||"Failed to delete entity")}const s=document.getElementById("deleteConfirmationModal");if(s&&"undefined"!==typeof bootstrap){const t=bootstrap.Modal.getInstance(s)||new bootstrap.Modal(s);t.hide()}this.$emit("deleted")}catch(e){this.error=e.message||"Error deleting entity"}finally{this.loading=!1}}}},Gt=(0,bt.A)(jt,[["render",Vt],["__scopeId","data-v-4d85695d"]]),Kt=Gt,Ot={class:"modal fade",id:"blacklistModal",tabindex:"-1"},Ht={class:"modal-dialog"},Yt={class:"modal-content"},Zt={class:"modal-header bg-warning text-dark"},te={class:"modal-title"},ee={class:"modal-body"},ae={key:0,class:"alert alert-danger mt-2"},oe={key:1,class:"text-center mt-2"},se={key:2,class:"mt-3"};function le(t,e,a,s,n,i){return(0,o.uX)(),(0,o.CE)("div",Ot,[(0,o.Lk)("div",Ht,[(0,o.Lk)("div",Yt,[(0,o.Lk)("div",Zt,[(0,o.Lk)("h5",te,"Blacklist "+(0,l.v_)(a.role),1),e[1]||(e[1]=(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},null,-1))]),(0,o.Lk)("div",ee,[(0,o.Lk)("p",null,[e[2]||(e[2]=(0,o.eW)("Are you sure you want to blacklist ",-1)),(0,o.Lk)("strong",null,(0,l.v_)(a.entity.name),1),e[3]||(e[3]=(0,o.eW)("?",-1))]),n.error?((0,o.uX)(),(0,o.CE)("div",ae,(0,l.v_)(n.error),1)):(0,o.Q3)("",!0),n.loading?((0,o.uX)(),(0,o.CE)("div",oe,[...e[4]||(e[4]=[(0,o.Lk)("div",{class:"spinner-border text-warning",role:"status"},null,-1)])])):((0,o.uX)(),(0,o.CE)("div",se,[(0,o.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>i.submitBlacklist&&i.submitBlacklist(...t)),class:"btn btn-warning"},"Confirm Blacklist"),e[5]||(e[5]=(0,o.Lk)("button",{class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1))]))])])])])}const ne={props:["entity","role"],data(){return{loading:!1,error:null}},methods:{async submitBlacklist(){this.loading=!0,this.error=null;try{const t=(0,nt.z5)();let e=null;if("doctor"===this.role)e=`http://localhost:5000/api/admin/blacklist/doctor/${this.entity.id}`;else{if("patient"!==this.role)throw new Error("Unknown role for blacklist");e=`http://localhost:5000/api/admin/blacklist/patient/${this.entity.id}`}const a=await fetch(e,{method:"POST",headers:t});if(!a.ok){const t=await a.json().catch(()=>({}));throw new Error(t.msg||t.error||"Failed to blacklist")}const o=document.getElementById("blacklistModal");if(o&&"undefined"!==typeof bootstrap){const t=bootstrap.Modal.getInstance(o)||new bootstrap.Modal(o);t.hide()}this.$emit("blacklisted"),alert(`${this.role} blacklisted successfully`)}catch(t){this.error=t.message||"Error blacklisting entity",console.error("Blacklist error:",t)}finally{this.loading=!1}}}},ie=(0,bt.A)(ne,[["render",le],["__scopeId","data-v-170009cc"]]),re=ie,de={class:"modal fade",id:"createDoctorModal",tabindex:"-1"},ce={class:"modal-dialog"},ue={class:"modal-content"},me={class:"modal-body"},pe={class:"mb-3"},he={class:"mb-3"},ke={class:"mb-3"},be={class:"mb-3"},Le={class:"mb-3"},ve={key:0,class:"alert alert-danger",role:"alert"},ye={key:1,class:"alert alert-success",role:"alert"},fe={class:"modal-footer"},ge=["disabled"],De={key:0,class:"spinner-border spinner-border-sm me-2"};function Ce(t,e,a,n,i,r){return(0,o.uX)(),(0,o.CE)("div",de,[(0,o.Lk)("div",ce,[(0,o.Lk)("div",ue,[e[12]||(e[12]=(0,o.Lk)("div",{class:"modal-header"},[(0,o.Lk)("h5",{class:"modal-title"},"Create New Doctor"),(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1)),(0,o.Lk)("div",me,[(0,o.Lk)("form",{onSubmit:e[5]||(e[5]=(0,s.D$)((...t)=>r.submitCreate&&r.submitCreate(...t),["prevent"]))},[(0,o.Lk)("div",pe,[e[6]||(e[6]=(0,o.Lk)("label",{for:"doctorName",class:"form-label"},"Name",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>i.formData.name=t),id:"doctorName",type:"text",class:"form-control",placeholder:"Enter doctor's name",required:""},null,512),[[s.Jo,i.formData.name]])]),(0,o.Lk)("div",he,[e[7]||(e[7]=(0,o.Lk)("label",{for:"doctorEmail",class:"form-label"},"Email",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>i.formData.email=t),id:"doctorEmail",type:"email",class:"form-control",placeholder:"Enter doctor's email",required:""},null,512),[[s.Jo,i.formData.email]])]),(0,o.Lk)("div",ke,[e[8]||(e[8]=(0,o.Lk)("label",{for:"doctorPassword",class:"form-label"},"Password",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>i.formData.password=t),id:"doctorPassword",type:"password",class:"form-control",placeholder:"Enter password",required:""},null,512),[[s.Jo,i.formData.password]])]),(0,o.Lk)("div",be,[e[9]||(e[9]=(0,o.Lk)("label",{for:"doctorSpecialization",class:"form-label"},"Specialization",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>i.formData.specialization=t),id:"doctorSpecialization",type:"text",class:"form-control",placeholder:"e.g., Cardiology, Neurology",required:""},null,512),[[s.Jo,i.formData.specialization]])]),(0,o.Lk)("div",Le,[e[10]||(e[10]=(0,o.Lk)("label",{for:"doctorAvailability",class:"form-label"},"Availability",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>i.formData.availability=t),id:"doctorAvailability",type:"text",class:"form-control",placeholder:"e.g., Mon-Fri 9AM-5PM",required:""},null,512),[[s.Jo,i.formData.availability]])]),i.error?((0,o.uX)(),(0,o.CE)("div",ve,(0,l.v_)(i.error),1)):(0,o.Q3)("",!0),i.success?((0,o.uX)(),(0,o.CE)("div",ye,(0,l.v_)(i.success),1)):(0,o.Q3)("",!0),(0,o.Lk)("div",fe,[e[11]||(e[11]=(0,o.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Cancel ",-1)),(0,o.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:i.isLoading},[i.isLoading?((0,o.uX)(),(0,o.CE)("span",De)):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,l.v_)(i.isLoading?"Creating...":"Create Doctor"),1)],8,ge)])],32)])])])])}const Ee={name:"CreateDoctorModal",data(){return{formData:{name:"",email:"",password:"",specialization:"",availability:""},isLoading:!1,error:null,success:null}},methods:{async submitCreate(){if(this.formData.name.trim())if(this.formData.email.trim())if(this.formData.password.trim())if(this.formData.specialization.trim())if(this.formData.availability.trim()){this.isLoading=!0,this.error=null,this.success=null;try{const t=(0,nt.z5)(),e=await fetch("http://localhost:5000/api/admin/doctors",{method:"POST",headers:{...t},body:JSON.stringify(this.formData)});if(!e.ok){const t=await e.json().catch(()=>({}));throw new Error(t.msg||t.error||"Failed to create doctor")}const a=await e.json();this.success="Doctor created successfully!",this.$emit("created",a),this.resetForm(),setTimeout(()=>{const t=bootstrap.Modal.getInstance(document.getElementById("createDoctorModal"));t&&t.hide()},1500)}catch(t){this.error=t.message||"An error occurred while creating the doctor",console.error("Create doctor error:",t)}finally{this.isLoading=!1}}else this.error="Availability is required";else this.error="Specialization is required";else this.error="Password is required";else this.error="Email is required";else this.error="Doctor name is required"},resetForm(){this.formData={name:"",email:"",password:"",specialization:"",availability:""},this.error=null,this.success=null}},watch:{"formData.name"(){this.error&&(this.error=null)},"formData.email"(){this.error&&(this.error=null)},"formData.password"(){this.error&&(this.error=null)},"formData.specialization"(){this.error&&(this.error=null)},"formData.availability"(){this.error&&(this.error=null)}}},we=(0,bt.A)(Ee,[["render",Ce],["__scopeId","data-v-2f62c53a"]]),_e=we,Ae={class:"modal fade",id:"appointmentDetailModal",tabindex:"-1"},Me={class:"modal-dialog modal-lg"},Xe={class:"modal-content"},Se={class:"modal-body"},Ie={key:0,class:"text-center"},Pe={key:1,class:"alert alert-danger"},ze={key:2},Qe={class:"card mb-3"},Be={class:"card-body"},Fe={class:"row"},xe={class:"col-md-6"},Ue={class:"col-md-6"},We={class:"card mb-3"},$e={class:"card-body"},Te={class:"row"},Ne={class:"col-md-6"},qe={class:"col-md-6"},Je={class:"card mb-3"},Re={class:"card-body"},Ve={class:"row"},je={class:"col-md-6"},Ge={class:"col-md-6"};function Ke(t,e,a,s,n,i){return(0,o.uX)(),(0,o.CE)("div",Ae,[(0,o.Lk)("div",Me,[(0,o.Lk)("div",Xe,[e[19]||(e[19]=(0,o.Lk)("div",{class:"modal-header"},[(0,o.Lk)("h5",{class:"modal-title"},"Appointment Details"),(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1)),(0,o.Lk)("div",Se,[n.loading?((0,o.uX)(),(0,o.CE)("div",Ie,[...e[0]||(e[0]=[(0,o.Lk)("div",{class:"spinner-border",role:"status"},[(0,o.Lk)("span",{class:"visually-hidden"},"Loading...")],-1)])])):n.error?((0,o.uX)(),(0,o.CE)("div",Pe,(0,l.v_)(n.error),1)):n.appointment?((0,o.uX)(),(0,o.CE)("div",ze,[(0,o.Lk)("div",Qe,[e[8]||(e[8]=(0,o.Lk)("div",{class:"card-header bg-primary text-white"},[(0,o.Lk)("h6",{class:"mb-0"},"Appointment Information")],-1)),(0,o.Lk)("div",Be,[(0,o.Lk)("div",Fe,[(0,o.Lk)("div",xe,[(0,o.Lk)("p",null,[e[1]||(e[1]=(0,o.Lk)("strong",null,"Appointment ID:",-1)),(0,o.eW)(" "+(0,l.v_)(n.appointment.id),1)]),(0,o.Lk)("p",null,[e[2]||(e[2]=(0,o.Lk)("strong",null,"Date:",-1)),(0,o.eW)(" "+(0,l.v_)(i.formatDate(n.appointment.date)),1)]),(0,o.Lk)("p",null,[e[3]||(e[3]=(0,o.Lk)("strong",null,"Time:",-1)),(0,o.eW)(" "+(0,l.v_)(n.appointment.time),1)])]),(0,o.Lk)("div",Ue,[(0,o.Lk)("p",null,[e[4]||(e[4]=(0,o.Lk)("strong",null,"Status:",-1)),e[5]||(e[5]=(0,o.eW)()),(0,o.Lk)("span",{class:(0,l.C4)(["badge","Completed"===n.appointment.status?"bg-success":"bg-info"])},(0,l.v_)(n.appointment.status),3)]),(0,o.Lk)("p",null,[e[6]||(e[6]=(0,o.Lk)("strong",null,"Reason:",-1)),(0,o.eW)(" "+(0,l.v_)(n.appointment.reason),1)]),(0,o.Lk)("p",null,[e[7]||(e[7]=(0,o.Lk)("strong",null,"Notes:",-1)),(0,o.eW)(" "+(0,l.v_)(n.appointment.notes),1)])])])])]),(0,o.Lk)("div",We,[e[14]||(e[14]=(0,o.Lk)("div",{class:"card-header bg-info text-white"},[(0,o.Lk)("h6",{class:"mb-0"},"Patient Information")],-1)),(0,o.Lk)("div",$e,[(0,o.Lk)("div",Te,[(0,o.Lk)("div",Ne,[(0,o.Lk)("p",null,[e[9]||(e[9]=(0,o.Lk)("strong",null,"Name:",-1)),(0,o.eW)(" "+(0,l.v_)(n.appointment.patient.name),1)]),(0,o.Lk)("p",null,[e[10]||(e[10]=(0,o.Lk)("strong",null,"Email:",-1)),(0,o.eW)(" "+(0,l.v_)(n.appointment.patient.email),1)]),(0,o.Lk)("p",null,[e[11]||(e[11]=(0,o.Lk)("strong",null,"Age:",-1)),(0,o.eW)(" "+(0,l.v_)(n.appointment.patient.age),1)])]),(0,o.Lk)("div",qe,[(0,o.Lk)("p",null,[e[12]||(e[12]=(0,o.Lk)("strong",null,"Gender:",-1)),(0,o.eW)(" "+(0,l.v_)(n.appointment.patient.gender),1)]),(0,o.Lk)("p",null,[e[13]||(e[13]=(0,o.Lk)("strong",null,"Contact:",-1)),(0,o.eW)(" "+(0,l.v_)(n.appointment.patient.contact_info),1)])])])])]),(0,o.Lk)("div",Je,[e[18]||(e[18]=(0,o.Lk)("div",{class:"card-header bg-success text-white"},[(0,o.Lk)("h6",{class:"mb-0"},"Doctor Information")],-1)),(0,o.Lk)("div",Re,[(0,o.Lk)("div",Ve,[(0,o.Lk)("div",je,[(0,o.Lk)("p",null,[e[15]||(e[15]=(0,o.Lk)("strong",null,"Name:",-1)),(0,o.eW)(" "+(0,l.v_)(n.appointment.doctor.name),1)]),(0,o.Lk)("p",null,[e[16]||(e[16]=(0,o.Lk)("strong",null,"Email:",-1)),(0,o.eW)(" "+(0,l.v_)(n.appointment.doctor.email),1)])]),(0,o.Lk)("div",Ge,[(0,o.Lk)("p",null,[e[17]||(e[17]=(0,o.Lk)("strong",null,"Specialization:",-1)),(0,o.eW)(" "+(0,l.v_)(n.appointment.doctor.specialization),1)])])])])])])):(0,o.Q3)("",!0)]),e[20]||(e[20]=(0,o.Lk)("div",{class:"modal-footer"},[(0,o.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ")],-1))])])])}const Oe={name:"AppointmentDetailModal",props:["appointmentId"],data(){return{appointment:null,loading:!0,error:null}},watch:{appointmentId(t){t&&this.fetchAppointmentDetail()}},methods:{async fetchAppointmentDetail(){this.loading=!0,this.error=null;try{const t=(0,nt.z5)(),e=await fetch(`http://localhost:5000/api/admin/appointments/${this.appointmentId}/detail`,{method:"GET",headers:t});if(!e.ok){const t=await e.json().catch(()=>({}));throw new Error(t.error||`Failed to fetch appointment details (${e.status})`)}const a=await e.json();console.log("Appointment detail data:",a),this.appointment=a.appointment}catch(t){this.error=t.message||"Error fetching appointment details",console.error("Fetch appointment error:",t)}finally{this.loading=!1}},formatDate(t){if(!t)return"N/A";const e=new Date(t);return e.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}}},He=(0,bt.A)(Oe,[["render",Ke],["__scopeId","data-v-d5a31c60"]]),Ye=He,Ze={name:"AdminDashboard",components:{EditDoctorModal:vt,EditPatientModal:Ft,DeleteConfirmationModal:Kt,BlacklistModal:re,CreateDoctorModal:_e,AppointmentDetailModal:Ye},data(){return{stats:{patients:0,doctors:0,appointments:0},doctors:[],patients:[],upcomingAppointments:[],pastAppointments:[],loading:!0,error:null,selectedDoctor:null,selectedPatient:null,selectedEntity:null,selectedRole:null,selectedAppointmentId:null,searchQuery:"",searchType:"all",isSearching:!1,searchResults:[]}},computed:{displayedDoctors(){return this.isSearching?this.doctors.filter(t=>t.name.toLowerCase().includes(this.searchQuery.toLowerCase())||t.specialization.toLowerCase().includes(this.searchQuery.toLowerCase())||t.email.toLowerCase().includes(this.searchQuery.toLowerCase())):this.doctors},displayedPatients(){return this.isSearching?this.patients.filter(t=>t.name.toLowerCase().includes(this.searchQuery.toLowerCase())||t.email.toLowerCase().includes(this.searchQuery.toLowerCase())||t.contact_info.toLowerCase().includes(this.searchQuery.toLowerCase())):this.patients}},mounted(){if("Admin"!==(0,nt.uG)())return this.error="Unauthorized: Admin access required",void this.$router.push("/login");this.fetchDashboardData()},methods:{async fetchDashboardData(){this.loading=!0,this.error=null,this.isSearching=!1,this.searchQuery="";try{const t=(0,nt.z5)(),e=await fetch("http://localhost:5000/api/admin/stats",{method:"GET",headers:t});if(!e.ok)throw new Error("Failed to fetch stats");const a=await e.json();this.stats={patients:a.total_patients||0,doctors:a.total_doctors||0,appointments:a.total_appointments||0};const o=await fetch("http://localhost:5000/api/admin/doctors",{method:"GET",headers:t});if(!o.ok)throw new Error("Failed to fetch doctors");const s=await o.json();this.doctors=s.doctors||[];const l=await fetch("http://localhost:5000/api/admin/patients",{method:"GET",headers:t});if(!l.ok)throw new Error("Failed to fetch patients");const n=await l.json();this.patients=n.patients||[];const i=await fetch("http://localhost:5000/api/admin/appointments",{method:"GET",headers:t});if(!i.ok)throw new Error("Failed to fetch appointments");const r=await i.json();this.separateAppointments(r.appointments||[])}catch(t){this.error=t.message||"An error occurred",console.error("Dashboard error:",t),(t.message.includes("Token expired")||t.message.includes("Unauthorized"))&&setTimeout(()=>{(0,nt.L)(),this.$router.push("/login")},2e3)}finally{this.loading=!1}},separateAppointments(t){const e=new Date;e.setHours(0,0,0,0),this.upcomingAppointments=[],this.pastAppointments=[],t.forEach(t=>{const a=new Date(t.date);a.setHours(0,0,0,0),a>=e?this.upcomingAppointments.push(t):this.pastAppointments.push(t)})},performSearch(){this.searchQuery.trim()&&(this.isSearching=!0)},clearSearch(){this.searchQuery="",this.isSearching=!1},formatDate(t){const e=new Date(t);return e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},openCreateModal(){const t=new bootstrap.Modal(document.getElementById("createDoctorModal"));t.show()},openEditDoctorModal(t){this.selectedDoctor={...t,isDoctor:!0};const e=new bootstrap.Modal(document.getElementById("editDoctorModal"));e.show()},openEditPatientModal(t){this.selectedPatient={...t};const e=new bootstrap.Modal(document.getElementById("editPatientModal"));e.show()},openDeleteModal(t,e){this.selectedEntity={...t},this.selectedRole=e;const a=new bootstrap.Modal(document.getElementById("deleteConfirmationModal"));a.show()},openBlacklistModal(t,e){this.selectedEntity={...t},this.selectedRole=e;const a=new bootstrap.Modal(document.getElementById("blacklistModal"));a.show()},openAppointmentDetail(t){this.selectedAppointmentId=t;const e=new bootstrap.Modal(document.getElementById("appointmentDetailModal"));e.show()},performLiveSearch(){const t=this.searchQuery.toLowerCase().trim();if(!t)return this.isSearching=!1,void(this.searchResults=[]);this.isSearching=!0,this.searchResults=[],this.doctors.forEach(e=>{(e.name.toLowerCase().includes(t)||e.specialization.toLowerCase().includes(t)||e.email.toLowerCase().includes(t))&&this.searchResults.push({id:e.id,user_id:e.user_id,name:e.name,type:"doctor",meta:e.specialization,data:e})}),this.patients.forEach(e=>{(e.name.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.contact_info.toLowerCase().includes(t))&&this.searchResults.push({id:e.id,user_id:e.user_id,name:e.name,type:"patient",meta:e.email,data:e})})},openDetailsFromSearch(t){"doctor"===t.type?this.openEditDoctorModal(t.data):"patient"===t.type&&this.openEditPatientModal(t.data),this.isSearching=!1,this.searchResults=[],this.searchQuery=""},logout(){(0,nt.L)(),this.$router.push("/login")}}},ta=(0,bt.A)(Ze,[["render",lt],["__scopeId","data-v-17a7ba1e"]]),ea=ta}}]);
//# sourceMappingURL=125.430ee1bf.js.map